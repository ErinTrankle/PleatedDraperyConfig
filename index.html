<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex" />
    <title>Pleated Drapery Calculator</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>

    <style>
      #app {
        font-family: Avenir, Helvetica, Arial, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-align: left;
        color: #2c3e50;
        margin-top: 0px;
      }
      html,
      input,
      select {
        font-size: 1em;
      }
      input,
      select,
      textarea {
        border: 1px solid #ccc;
        padding: 2px;
        border-radius: 4px;
        box-sizing: border-box;
        font-weight: bold;
      }

      .flex-container {
        display: flex;
        flex-wrap: nowrap;
      }

      .section {
        margin: 20px 0px 0px 20px;
        padding: 40px;
        background-color: gainsboro;
      }

      .header {
        position: fixed;
        height: 40px;
      }

      .leftColumn {
        position: fixed;
        top: 100px;
      }

      .rightColumn {
        position: absolute;
        top:100px;
        left: 600px;
        height: 4000px;
      }

      table {
        margin-right: 40px;
      }
      td {
        text-align: left;
        width: auto;
        padding: 4px;
        min-width: 120px;
        outline: 0px red solid;
      }

      .bold {
        font-weight: bold;
      }

      .dynamic {
        color: dodgerblue;
      }
      .message {
        color:red;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <div class="header">
        <h1>Pleated Drapery Configurator</h1>
      </div>

      <div class="leftColumn">
        <!-------------------- Summary --------------------->

        <div class="flex-container">
          <div class="section">
            <h1>Summary</h1>
            <table>
              <tr>
                <td class="big bold">Unit price</td>
                <td class="big bold green">${{ unitCost }}</td>
              </tr>
              <tr>
                <td class="big bold">Quantity</td>
                <td class="big bold">
                  <input
                    type="number"
                    name=""
                    id=""
                    min="1"
                    v-model.number="quantity"
                    @change="updateAll()"
                  />
                </td>
              </tr>
              <tr>
                <td class="bold big">Total</td>
                <td class="bold big green">${{ unitCost * quantity }}</td>
              </tr>
            </table>
          </div>
        </div>
      </div>

      <div class="rightColumn">
        <!-------------------- Fabric --------------------->
        <div class="flex-container">
          <div class="section">
            <h1>Fabric</h1>
            <table>
              <tr>
                <td>C.O.M.</td>
                <td>
                  <!-- <select name="" id="" v-model="COM" @change="update()">
                    <option :value="true">Yes</option>
                    <option :value="false">No</option>
                  </select> -->
                  <input
                    type="radio"
                    name="COM"
                    :value="false"
                    v-model="COM"
                    @change="update()"
                  />No
                  <input
                    type="radio"
                    name="COM"
                    :value="true"
                    v-model="COM"
                    @change="update()"
                  />Yes
                </td>
              </tr>

              <!--------- RM COCO options -------->
              <tr v-show="!COM">
                <td>Pattern</td>
                <td>
                  <select name="" id="" v-model="pattern">
                    <option value="" >Select Pattern</option>
                  </select>
                </td>
              </tr>

              <tr v-show="!COM">
                <td>Color</td>
                <td><select name="" id="" v-model="color">
                  <option value="">Select Color</option>
                </select></td>
              </tr>
              <tr v-show="!COM">
                <td>Width (in)</td>
                <td>
                  <select
                    name="boltWidth"
                    id=""
                    v-model.number="boltWidth"
                    @change="update()"
                  >
                    <option value="48">48</option>
                    <option value="54">54</option>
                    <option value="60">60</option>
                  </select>
                </td>
              </tr>
              <tr v-show="!COM">
                <td>Repeat</td>
                <td>
                  <input
                    type="number"
                    name="repeat"
                    min="0"
                    v-model.number="repeat"
                    @change="update()"
                  />
                </td>
              </tr>

              <tr v-show="!COM">
                <td>Price Code</td>
                <td><input type="number" name="" id="" v-model="priceCode" @change="update()"></td>
              </tr>

              <!------- COM options -->
              <tr v-show="COM">
                <td>Pattern</td>
                <td><input type="text" v-model="pattern" /></td>
              </tr>
              <tr v-show="COM">
                <td>Color</td>
                <td><input type="text" v-model="color" /></td>
              </tr>
              <tr v-show="COM">
                <td>Source</td>
                <td><input type="text" v-model="source" /></td>
              </tr>
              <tr v-show="COM">
                <td>Width (in)</td>
                <td>
                  <select
                    name="boltWidth"
                    id=""
                    v-model.number="boltWidth"
                    @change="update()"
                  >
                    <option value="48">48</option>
                    <option value="54">54</option>
                    <option value="60">60</option>
                  </select>
                </td>
              </tr>
              <tr v-show="COM">
                <td>Repeat</td>
                <td>
                  <input
                    type="number"
                    name="repeat"
                    min="0"
                    v-model.number="repeat"
                    @change="update()"
                  />
                </td>
              </tr>
            </table>
          </div>
        </div>

        <!-------------------- Panel or Pair --------------------->
        <div class="flex-container">
          <div class="section">
            <h1>Panel or Pair</h1>
            <table>
              <tr>
                <td>Panel or Pair</td>
                <td>
                  <select
                    name=""
                    id=""
                    v-model.number="panelOrPair"
                    @change="update()"
                  >
                    <option value="DRAPERYPANEL">Panel</option>
                    <option value="DRAPERYPAIR">Pair</option>
                  </select>
                </td>
              </tr>
            </table>
          </div>
        </div>

        <!-------------------- Pleat Style --------------------->
        <div class="flex-container">
          <div class="section">
            <h1>Pleat Style</h1>
            <table>
              <tr>
                <td>Pleat Type</td>
                <td>
                  <select name="" id="" v-model="pleatType" @change="update()">
                    <option value="1prong">1 Prong Pinch Pleat</option>
                    <option value="2prong">2 Prong Pinch Pleat</option>
                    <option value="3prong">3 Prong Pinch Pleat</option>
                    <option value="2prongtacked">2 Prong Tacked at Top</option>
                    <option value="3prongtacked">3 Prong Tacked at Top</option>
                    <option value="reverse">Reverse</option>
                    <option value="softgoblet">Soft Goblet Pleat</option>
                    <option value="cartridge">Cartridge</option>
                    <option value="casual1prong">Casual 1 Prong</option>
                    <option value="singleskip">Single Skip Pleat</option>
                    <option value="clusterskip">Cluster Skip Pleat</option>
                    <option value="sewonCOM">Sew on C.O.M. Ring Top</option>
                    <option value="graduated">
                      Pinch Pleated Graduated Valance
                    </option>
                    <option value="multigraduated">
                      Pinch Pleated Multiple Graduated Valance
                    </option>
                    <option value="box">Box Pleat</option>
                    <option value="inverted">Inverted Pleated</option>
                  </select>
                </td>
              </tr>
              <tr>
                <td>Shirr Top Bottom</td>
                <td>
                  <select name="" id="" v-model="shirr">
                    <option value="none">None</option>
                    <option value="top">Top</option>
                    <option value="bottom">Bottom</option>
                    <option value="both">Top & Bottom</option>
                  </select>
                </td>
              </tr>
              <tr>
                <td>Heading Size</td>
                <td>
                  <input
                    type="number"
                    name=""
                    id=""
                    v-model="headingSize"
                    min="0"
                  />
                </td>
              </tr>
              <tr>
                <td>Rod Pocket Size</td>
                <td>
                  <input
                    type="number"
                    name=""
                    id=""
                    v-model="rodPocketSize"
                    min="0"
                  />
                </td>
              </tr>
              <tr>
                <td>Pin Setting</td>
                <td>
                  <select name="" id="" v-model="pinSetting">
                    <option value="regular">Regular Rod (1.75")</option>
                    <option value="decorative">Decorative Rod (0.5")</option>
                    <option value="ceiling">Ceiling Rod (1.5")</option>
                  </select>
                </td>
              </tr>
            </table>

          </div>
        </div>

        <!-------------------- Measurements --------------------->
        <div class="flex-container">
          <div class="section">
            <h1>Measurements</h1>
            <table>
              <tr>
                <td>Rod Width (in)</td>
                <td>
                  <input
                    type="number"
                    name="rodWidth"
                    v-model.number="rodWidth"
                    @change="update"
                    min="0"
                  />
                </td>
              </tr>
              <tr>
                <td>Left Return (in)</td>
                <td>
                  <input
                    type="number"
                    name="leftReturn"
                    v-model.number="leftReturn"
                    @change="update"
                    min="0"
                  />
                </td>
              </tr>
              <tr>
                <td>Right Return (in)</td>
                <td>
                  <input
                    type="number"
                    name="rightReturn"
                    v-model.number="rightReturn"
                    @change="update"
                    min="0"
                  />
                </td>
              </tr>
              <tr>
                <td>Overlap (in)</td>
                <td>
                  <input
                    type="number"
                    name="overlap"
                    v-model.number="overlap"
                    @change="update"
                    min="0"
                  />
                </td>
              </tr>
              <tr>
                <td>Finished Width (in)</td>
                <td>
                  <span class="bold">{{ this.finishedWidth }}</span>
                </td>
              </tr>

              <tr>
                <td>Fullness</td>
                <td>
                  <select
                    name="fullness"
                    id=""
                    v-model.number="fullness"
                    @change="update()"
                  >
                    <option
                      v-for="item in fullnessOptions"
                      :value="item"
                      :key="item"
                    >
                      {{item}}
                    </option>
                  </select>
                </td>
                <td>
                  <span class="message">{{ this.fullnessMessage }}</span>
                </td>
              </tr>
              <tr>
                <td>Total Widths</td>
                <td>
                  <span class="bold">{{ this.totalWidths }}</span>
                </td>
              </tr>
              <tr>
                <td>Finished Length (in)</td>
                <td>
                  <input
                    type="number"
                    name="finishedLength"
                    v-model.number="finishedLength"
                    min="0"
                    max="180"
                    @change="update()"
                  />
                </td>
              </tr>
              <tr>
                <td>Cut Length (in)</td>
                <td class="bold">{{ this.cutLength }}</td>
              </tr>
              <tr>
                <td>Extra for Repeat (in)</td>
                <td class="bold">{{ this.fabricNeededForRepeat }}</td>
              </tr>
              <tr>
                <td>Total Length (in)</td>
                <td class="bold">{{ this.totalLength }}</td>
              </tr>
              <tr>
                <td>Yardage Required</td>

                <td>
                  <span class="bold">{{ this.COMyardage }}</span>
                </td>
              </tr>
            </table>
          </div>
        </div>

        <!-------------------- Lining --------------------->
        <div class="flex-container">
          <div class="section">
            <h1>Lining</h1>
            <table>
              <tr>
                <td>Lining</td>
                <td>
                  <select name="" id="" v-model="lining" @change="update()">
                    <option :value="false">Unlined</option>
                    <option :value="true">Lined</option>
                  </select>
                </td>
              </tr>

              <tr v-show="lining">
                <td>Type of Lining</td>
                <td>
                  <select name="" id="" v-model="liningType" @change="update()">
                    <option value="RoyalSateen">Royal Sateen</option>
                    <option value="COCOWeatherGuard">COCO Weather Guard</option>
                    <option value="sussex">Sussex</option>
                    <option value="COCOTherafoam">COCO Therafoam</option>
                    <option value="RMSheen">R & M Sheen</option>
                    <option value="blackout">Blackout</option>
                    <!-- <option value="">Other (See Below)</option> -->
                  </select>
                </td>
              </tr>
              <tr v-show="lining">
                <td>Lining Color</td>
                <td>
                  <select name="" id="" v-model="liningColor">
                    <option value="white">White</option>
                    <option value="ivory">Ivory</option>
                  </select>
                </td>
              </tr>
            </table>
            <table>
              <tr>
                <td>Interlining</td>
                <td>
                  <select
                    name=""
                    id=""
                    v-model="interlining"
                    @change="update()"
                  >
                    <option :value="true">Yes</option>
                    <option :value="false">No</option>
                  </select>
                </td>
              </tr>
              <tr v-show="interlining">
                <td>Color</td>
                <td>
                  <select name="" v-model="interliningColor" id="">
                    <option value="white">White</option>
                    <option value="ivory">Ivory</option>
                  </select>
                </td>
              </tr>
            </table>

            <!-- <table>
      <tr>
        <td class="bold big">Interlining Upcharge (D7)</td>
        <td class="bold big green">${{ interliningCost }}</td>
      </tr>
    </table> -->
          </div>
        </div>

        <!-------------------- Trimming --------------------->
        <div class="flex-container">
          <div class="section">
            <h1>Trimming</h1>

            <table>
              <tr>
                <td>Horizontal Trimming</td>
                <td>
                  <select
                    name=""
                    id=""
                    v-model="trimming.horizontal.included"
                    @change="update()"
                  >
                    <option :value="true">Yes</option>
                    <option :value="false">No</option>
                  </select>
                </td>
              </tr>

              <tr v-show="trimming.horizontal.included">
                <td>COM</td>
                <td>
                  <select
                    name=""
                    id=""
                    v-model="trimming.horizontal.COM"
                    @change="update()"
                  >
                    <option :value="true">Yes</option>
                    <option :value="false">No</option>
                  </select>
                </td>
              </tr>

              <tr v-show="trimming.horizontal.included">
                <td>Pattern</td>
                <td>
                  <select name="" id="" v-model="trimming.horizontal.pattern" >
                    <option value="">select from trimming patterns</option>
                  </select>
                </td>
              </tr>
              <tr v-show="trimming.horizontal.included">
                <td>Color</td>
                <td>
                  <select name="" id="" v-model="trimming.horizontal.color" >
                    <option value="">trimming colors for selected pattern</option>
                  </select>
                </td>
              </tr>
              <tr v-show="trimming.horizontal.included">
                <td>Price / yd</td>
                <td>
                  <input
                    type="number"
                    v-model="trimming.horizontal.price"
                    @change="update"
                    placeholder="populate from selection"
                  />
                </td>
              </tr>
              <tr v-show="trimming.horizontal.included">
                <td>Yardage required</td>
                <td>
                  <span class="bold"
                    >{{ trimming.horizontal.yardageRequired }}</span
                  >
                </td>
              </tr>
              <tr v-show="trimming.horizontal.included">
                <td>Trim Cost</td>
                <td>
                  <span class="bold">${{ trimming.horizontal.cost }}</span>
                </td>
              </tr>
              <tr v-show="trimming.horizontal.included">
                <td>Labor (table D5)</td>
                <td>
                  <span class="bold">${{ trimming.horizontal.labor }}</span>
                </td>
              </tr>
              <!--
    <tr v-show="trimming.horizontal.included">
      <td>Total</td>
      <td>
        <span class="bold">${{ trimming.horizontal.total }}</span>
      </td>
    </tr>
  -->
            </table>
            <br />
            <table>
              <tr>
                <td>Vertical Trimming</td>
                <td>
                  <select
                    name=""
                    id=""
                    v-model="trimming.vertical.included"
                    @change="update()"
                  >
                    <option :value="true">Yes</option>
                    <option :value="false">No</option>
                  </select>
                </td>
              </tr>

              <tr v-show="trimming.vertical.included">
                <td>COM</td>
                <td>
                  <select
                    name=""
                    id=""
                    v-model="trimming.vertical.COM"
                    @change="update()"
                  >
                    <option :value="true">Yes</option>
                    <option :value="false">No</option>
                  </select>
                </td>
              </tr>

              <tr v-show="trimming.vertical.included">
                <td>Pattern / Color</td>
                <td>
                  <input type="text" v-model="trimming.vertical.pattern" />
                </td>
              </tr>
              <tr v-show="trimming.vertical.included">
                <td>Price / yd</td>
                <td>
                  <input
                    type="number"
                    v-model="trimming.vertical.price"
                    @change="update"
                  />
                </td>
              </tr>
              <tr v-show="trimming.vertical.included">
                <td>Yardage required</td>
                <td>
                  <span class="bold"
                    >{{ trimming.vertical.yardageRequired }}</span
                  >
                </td>
              </tr>
              <tr v-show="trimming.vertical.included">
                <td>Trim Cost</td>
                <td>
                  <span class="bold">${{ trimming.vertical.cost }}</span>
                </td>
              </tr>
              <tr v-show="trimming.vertical.included">
                <td>Labor (table D9)</td>
                <td>
                  <span class="bold">${{ trimming.vertical.labor }}</span>
                </td>
              </tr>
              <!-- <tr v-show="trimming.vertical.included">
  <td>Total</td>
  <td>
    <span class="bold">${{ trimming.vertical.total }}</span>
  </td>
</tr> -->
            </table>
          </div>
        </div>
      </div>
    </div>

    <script type="module">
      import { masterFunction } from "./main.js";

      calculator = new Vue({
        el: "#app",
        data: {
          pattern: null,
          color: null,
          source: null,
          description: null,
          boltWidth: 54,
          repeat: null,
          repeatSurcharge: null,
          priceCode: 5,
          fabricPrice: null,
          pricePoint: null,
          panelOrPair: "DRAPERYPANEL",
          quantity: 1,
          rodWidth: 0,
          leftReturn: 0,
          rightReturn: 0,
          overlap: 0,
          COM: false,
          finishedWidth: null,
          fullness: 2,
          fullnessOptions: [1.5, 2, 2.25, 2.5, 3],
          fullnessMessage: "",
          totalWidths: null,
          finishedLength: 0,
          cutLength: 0,
          shirr: null,
          headingSize: null,
          rodPocketSize: null,
          lining: false,
          liningType: "RoyalSateen",
          liningColor: null,
          interlining: false,
          interliningColor: null,
          interliningCost: 0,
          blackout: false,
          blackoutCost: 0,
          pinSetting: "regular",
          COMyardage: null,
          fabricNeededForRepeat: 0,
          baseCost: 0,
          totalLength: 0,
          pleatType: null,
          pleatMessage: null,
          pleatCost: 0,
          trimming: {
            horizontal: {
              included: false,
              COM: false,
              pattern: null,
              price: null,
              labor: null,
              yardageRequired: null,
              cost: null,
              total: null,
            },
            vertical: {
              included: false,
              COM: false,
              pattern: null,
              price: null,
              labor: null,
              yardageRequired: null,
              cost: null,
              total: null,
            },
            total: {
              cost: null,
            },
          },
          unitCost: 0,
        },
        methods: {
          masterFunction,
          update() {
            //check pleat style selection and change fullness options
            if (this.pleatType == "1prong") {
              this.fullnessOptions = [1.5, 2];
              this.fullnessMessage =
                "1.5 is recommended fullness for 1 Prong Pinch Pleat";
            } else if (
              this.pleatType == "2prong" ||
              this.pleatType == "2prongtacked"
            ) {
              this.fullnessOptions = [1.5, 2, 2.25, 2.5];
              this.fullnessMessage =
                "2.25 is recommended fullness for 2 Prong Pleats";
            } else if (this.pleatType == "singleskip") {
              this.fullnessOptions = [1.5, 2, 2.25, 2.5];
              this.fullnessMessage =
                "2.5 is recommended fullness for Single Skip Pleat";
            } else {
              this.fullnessOptions = [1.5, 2, 2.25, 2.5, 3];
              this.pleatMessage = "";
              this.fullnessMessage = "";
            }

            //send the entire object to masterFunction
            var result = masterFunction(this.$data);

            //map result data back to view
            this.finishedWidth = result.finishedWidth;
            this.totalWidths = result.totalWidths;
            this.cutLength = result.cutLength;
            this.fabricNeededForRepeat = result.fabricNeededForRepeat;
            this.totalLength = result.totalLength;
            this.COMyardage = result.COMyardage;
            this.pricePoint = result.pricePoint;
            this.baseCost = result.D1;
            this.interliningCost = result.interliningCost;
            this.blackoutCost = result.blackoutCost;
            this.pleatCost = result.pleatCost;
            this.trimming.vertical.yardageRequired =
              result.trimming.vertical.yardageRequired;
            this.trimming.vertical.labor = result.trimming.vertical.labor;
            this.trimming.vertical.cost = result.trimming.vertical.cost;
            this.trimming.vertical.total = result.trimming.vertical.total;
            this.trimming.horizontal.yardageRequired =
              result.trimming.horizontal.yardageRequired;
            this.trimming.horizontal.labor = result.trimming.horizontal.labor;
            this.trimming.horizontal.cost = result.trimming.horizontal.cost;
            this.trimming.horizontal.total = result.trimming.horizontal.total;
            this.trimming.total.cost = result.trimming.total.cost;
            this.unitCost = result.unitCost;
          },
        },
        mounted: function () {
          this.update();
        },
      });
    </script>
  </body>
</html>
